<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.mapper.MyMapper">
<resultMap type="com.spring.mypage.BookmarkVO" id="bmMap">
   <result property="mark_num" column="mark_num"  />
   <result property="email" column="email"  />
   <result property="product_num" column="product_num"  />
   <result property="regist" column="regist"  />
   <result property="bookmark_img" column="bookmark_img"  />
</resultMap>

<resultMap type="com.spring.mypage.PStateVO" id="psMap">
   <result property="state_num" column="state_num"  />
   <result property="subscribe_num" column="subscribe_num"  />
   <result property="product_num" column="product_num"  />
   <result property="state" column="state"  />
   <result property="delivery_date" column="delivery_date"  />
   <result property="return_application" column="return_application"  />
</resultMap>






<select id="getMyPageBookMark" parameterType="map" resultType="com.spring.mypage.bookjoinproductVO">	
	select p.product_num, p.product_name, p.MANUFACTURER, p.img_sum, b.mark_num, b.email  
	from product p, bookmark b 
	where p.product_num=b.product_num AND email=#{email}
</select>

<select id="getMyPageWishList" parameterType="map" resultType="com.spring.mypage.wishjoinproductVO">
	select p.product_num, p.product_name, p.MANUFACTURER, p.img_sum, w.wish_num, w.email  
	from product p, wishlist w
	where p.product_num=w.product_num AND email=#{email}
</select>

<select id="getMyPageReservation" parameterType="map" resultType="com.spring.mypage.reservjoinproductVO">
	select p.product_num, p.product_name, p.MANUFACTURER, p.img_sum, r.reserve_num, r.email  
	from product p, reservation r
	where p.product_num=r.product_num AND email=#{email}	
</select>

<select id="getMyPageShare" parameterType="map" resultType="com.spring.tazo.ShareWatingListVO">
	select * from share_wating_list where email=#{email} 
</select>

<select id="getProductState" parameterType="String" resultMap="psMap">
	SELECT P.STATE_NUM, P.SUBSCRIBE_NUM, P.PRODUCT_NUM, P.STATE, P.DELIVERY_DATE, P.RETURN_APPLICATION 
	FROM MEMBER M, SUBSCRIBE S, PRODUCT_STATE P
	WHERE M.EMAIL = S.EMAIL AND S.SUBSCRIBE_NUM = P.SUBSCRIBE_NUM AND M.EMAIL = #{email}
</select>



</mapper>